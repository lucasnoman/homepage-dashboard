services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    ports:
      - 3000:3000
    volumes:
      - type: bind
        source: ${HOMEPAGE_FILE_CONFIG}/homepage_data
        target: /app/config
      - type: bind
        source: ${HOMEPAGE_FILE_CONFIG}/images
        target: /app/public/images
      - /var/run/docker.sock:/var/run/docker.sock:ro # optional
    environment:
      PUID: ${PUID}
      PGID: ${PGID}

      HOMEPAGE_ALLOWED_HOSTS: '*'

      HOMEPAGE_VAR_OPENWEATHER_LAT: ${OPENWEATHER_LAT}
      HOMEPAGE_VAR_OPENWEATHER_LON: ${OPENWEATHER_LON}
      HOMEPAGE_VAR_OPENWEATHER_API_KEY: ${OPENWEATHER_API_KEY}

      HOMEPAGE_VAR_TAUTULLI_KEY: ${TAUTULLI_KEY}
      HOMEPAGE_VAR_SONARR_KEY: ${SONARR_KEY}
      HOMEPAGE_VAR_RADARR_KEY: ${RADARR_KEY}
      HOMEPAGE_VAR_PROWLARR_KEY: ${PROWLARR_KEY}
      HOMEPAGE_VAR_BAZARR_KEY: ${BAZARR_KEY}

      HOMEPAGE_VAR_PLEX_HOST: ${SERVER_HOST}:32400
      HOMEPAGE_VAR_JELLYFIN_HOST: ${SERVER_HOST}:8096
      HOMEPAGE_VAR_SEANIME_HOST: ${SERVER_HOST}:43211
      HOMEPAGE_VAR_JELLYSEERR_HOST: ${SERVER_HOST}:5055
      HOMEPAGE_VAR_TAUTULLI_HOST: ${SERVER_HOST}:8181
      HOMEPAGE_VAR_SONARR_HOST: ${SERVER_HOST}:8989
      HOMEPAGE_VAR_RADARR_HOST: ${SERVER_HOST}:7878
      HOMEPAGE_VAR_PROWLARR_HOST: ${SERVER_HOST}:9696
      HOMEPAGE_VAR_BAZARR_HOST: ${SERVER_HOST}:6767
      HOMEPAGE_VAR_QBITTORRENT_HOST: ${SERVER_HOST}:8080
      HOMEPAGE_VAR_TECHNITIUM_HOST: ${SERVER_HOST}:5380

      HOMEPAGE_VAR_QBITTORRENT_PASS: ${QBITTORRENT_PASS}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://192.168.0.100:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
